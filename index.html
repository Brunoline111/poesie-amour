<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<title>Po√©sie Amour - Authentification</title>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
<style>
  body { font-family: Arial, sans-serif; max-width: 400px; margin: 30px auto; background: linear-gradient(135deg, #f5a623, #f76b1c, #f5a623); color: #222; }
  input, button { display: block; margin: 10px 0; padding: 10px; width: 100%; border: none; border-radius: 5px; font-size: 1em; }
  input { box-shadow: 0 0 5px #f76b1c; }
  button { background: linear-gradient(90deg, #f76b1c, #f5a623); color: white; cursor: pointer; transition: background 0.3s ease; }
  button:hover { background: linear-gradient(90deg, #f5a623, #f76b1c); }
  #user-info { margin-top: 20px; font-weight: bold; }
</style>
</head>
<body>

<h2>Po√©sie Amour - Connexion</h2>

<input type="email" id="email" placeholder="Email" />
<input type="password" id="password" placeholder="Mot de passe" />

<button id="signup-btn">S'inscrire</button>
<button id="login-btn">Se connecter</button>
<button id="logout-btn" style="display:none;">Se d√©connecter</button>

<div id="user-info"></div>

<script>
  const firebaseConfig = {
    apiKey: "AIzaSyCtm5hzBBhiYBXJ3FN4tmdkm44LK6tMbXs",
    authDomain: "poesie-amour.firebaseapp.com",
    projectId: "poesie-amour",
  };

  firebase.initializeApp(firebaseConfig);
  const auth = firebase.auth();

  const emailInput = document.getElementById('email');
  const passInput = document.getElementById('password');
  const signupBtn = document.getElementById('signup-btn');
  const loginBtn = document.getElementById('login-btn');
  const logoutBtn = document.getElementById('logout-btn');
  const userInfo = document.getElementById('user-info');

  signupBtn.onclick = () => {
    const email = emailInput.value;
    const password = passInput.value;
    auth.createUserWithEmailAndPassword(email, password)
      .then(userCredential => {
        alert('Inscription r√©ussie !');
      })
      .catch(error => {
        alert(error.message);
      });
  };

  loginBtn.onclick = () => {
    const email = emailInput.value;
    const password = passInput.value;
    auth.signInWithEmailAndPassword(email, password)
      .then(userCredential => {
        alert('Connexion r√©ussie !');
      })
      .catch(error => {
        alert(error.message);
      });
  };

  logoutBtn.onclick = () => {
    auth.signOut();
  };

  auth.onAuthStateChanged(user => {
    if (user) {
      userInfo.textContent = 'Connect√© en tant que : ' + user.email;
      
      // Message de bienvenue styl√©
      const welcomeMsg = document.createElement('p');
      welcomeMsg.style.color = '#FFD700'; // dor√©
      welcomeMsg.style.fontWeight = 'bold';
      welcomeMsg.textContent = `Bienvenue sur Po√©sie Amour, ${user.email.split('@')[0]} ! üåπ`;
      
      // Enlever ancien message s'il y en a
      const oldMsg = document.getElementById('welcome-msg');
      if(oldMsg) oldMsg.remove();

      welcomeMsg.id = 'welcome-msg';
      userInfo.appendChild(welcomeMsg);

      logoutBtn.style.display = 'block';
      loginBtn.style.display = 'none';
      signupBtn.style.display = 'none';
    } else {
      userInfo.textContent = '';
      logoutBtn.style.display = 'none';
      loginBtn.style.display = 'block';
      signupBtn.style.display = 'block';
    }
  });
</script>

</body>
</html>
