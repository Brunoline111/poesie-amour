<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<title>Poésie Amour - Connexion</title>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
<style>
  body {
    font-family: Arial, sans-serif;
    max-width: 400px;
    margin: 30px auto;
    background: linear-gradient(135deg, #ff9a9e 0%, #fad0c4 100%);
    padding: 20px;
    border-radius: 15px;
    box-shadow: 0 8px 16px rgba(0,0,0,0.3);
    color: #333;
  }
  input, button {
    display: block;
    margin: 12px 0;
    padding: 10px;
    width: 100%;
    border: none;
    border-radius: 8px;
    font-size: 1em;
  }
  input {
    box-shadow: inset 0 0 5px rgba(0,0,0,0.1);
  }
  button {
    background: linear-gradient(45deg, #6a11cb, #2575fc);
    color: white;
    cursor: pointer;
    font-weight: bold;
    transition: background 0.3s ease;
  }
  button:hover {
    background: linear-gradient(45deg, #2575fc, #6a11cb);
  }
  #logout-btn {
    background: #f44336;
    margin-top: 20px;
  }
  #user-info {
    margin-top: 20px;
    font-weight: bold;
  }
</style>
</head>
<body>

<h2>Poésie Amour - Connexion</h2>

<input type="email" id="email" placeholder="Email" />
<input type="password" id="password" placeholder="Mot de passe" />

<button id="signup-btn">S'inscrire</button>
<button id="login-btn">Se connecter</button>
<button id="logout-btn" style="display:none;">Se déconnecter</button>

<div id="user-info"></div>

<script>
  // Remplace avec ta config Firebase
  const firebaseConfig = {
    apiKey: "AIzaSyCtm5hzBBhiYBXJ3FN4tmdkm44LK6tMbXs",
    authDomain: "poesie-amour.firebaseapp.com",
    projectId: "poesie-amour",
    storageBucket: "poesie-amour.firebasestorage.app",
    messagingSenderId: "72054264195",
    appId: "1:72054264195:web:63eae95b68736a77a5e6b6",
    measurementId: "G-Y7PXEZ6VRW"
  };

  firebase.initializeApp(firebaseConfig);
  const auth = firebase.auth();

  const emailInput = document.getElementById('email');
  const passInput = document.getElementById('password');
  const signupBtn = document.getElementById('signup-btn');
  const loginBtn = document.getElementById('login-btn');
  const logoutBtn = document.getElementById('logout-btn');
  const userInfo = document.getElementById('user-info');

  signupBtn.onclick = () => {
    const email = emailInput.value;
    const password = passInput.value;
    auth.createUserWithEmailAndPassword(email, password)
      .then(() => {
        alert('Inscription réussie ! Tu peux maintenant te connecter.');
      })
      .catch(error => {
        alert(error.message);
      });
  };

  loginBtn.onclick = () => {
    const email = emailInput.value;
    const password = passInput.value;
    auth.signInWithEmailAndPassword(email, password)
      .then(() => {
        // Redirection vers la page d'accueil après connexion
        window.location.href = "home.html";
      })
      .catch(error => {
        alert(error.message);
      });
  };

  logoutBtn.onclick = () => {
    auth.signOut();
  };

  auth.onAuthStateChanged(user => {
    if (user) {
      userInfo.textContent = 'Connecté en tant que : ' + user.email;
      logoutBtn.style.display = 'block';
      loginBtn.style.display = 'none';
      signupBtn.style.display = 'none';
    } else {
      userInfo.textContent = '';
      logoutBtn.style.display = 'none';
      loginBtn.style.display = 'block';
      signupBtn.style.display = 'block';
    }
  });
</script>

</body>
</html>
